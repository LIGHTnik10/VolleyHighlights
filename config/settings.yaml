# Volleyball Rally Detection Configuration

ball_detection:
  # YOLO model to use (n=nano, s=small, m=medium, l=large, x=xlarge)
  # nano is fastest, recommended for 3060 TI
  model: "yolov8n.pt"

  # Minimum confidence threshold for ball detection
  # Lower = more detections (may include false positives)
  # Higher = fewer detections (may miss some balls)
  confidence_threshold: 0.2

  # Classes to detect (0 = sports ball in COCO dataset)
  # We'll primarily look for "sports ball" class
  target_classes: [32] # 32 = sports ball in COCO

  # Image size for inference (larger = more accurate but slower)
  imgsz: 640

  # Use GPU if available
  device: "cuda"

tracking:
  # Maximum frames to keep tracking a lost ball
  max_frames_to_skip: 30

  # Minimum track length to consider valid
  min_track_length: 5

rally_detection:
  # Seconds without ball before rally is considered ended
  # Increase this to allow for brief moments when ball isn't visible
  ball_missing_timeout: 5.0

  # Seconds to keep after rally ends (capture reactions, celebrations)
  post_rally_buffer: 4.0

  # Seconds before ball appears to include (anticipation, serve setup)
  pre_rally_buffer: 2.0

  # Ground level as percentage of frame height (0.85 = 85% from top)
  ground_level_threshold: 0.85

  # Minimum rally duration to keep (filter out false detections)
  # Lower this to capture shorter plays
  min_rally_duration: 1.5

video:
  # Output settings
  output_format: "mp4"
  output_codec: "libx264"
  output_fps: null # null = same as input

  # Processing
  batch_size: 1 # Frames to process at once
  skip_frames: 0 # Process every Nth frame (0 = all frames)

debug:
  # Save annotated frames for debugging
  save_debug_frames: false
  debug_output_dir: "debug_output"

  # Show live preview while processing
  show_preview: false

  # Verbose logging
  verbose: true
